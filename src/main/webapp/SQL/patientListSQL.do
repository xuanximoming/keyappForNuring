#
#Sun Oct 15 21:44:34 CST 2017
SQL=SELECT DISTINCT A.PATIENT_ID AS brid,\r\n                B.VISIT_ID AS zyid,\r\n                A.NAME AS brname,\r\n                (SELECT BED_LABEL\r\n                   FROM BED_REC\r\n                  WHERE BED_NO \= B.bed_no\r\n                    AND ward_code \= B.Ward_Code) AS chuang,\r\n                B.bed_no AS paixu,\r\n                A.SEX AS sex,\r\n                B.DOCTOR_IN_CHARGE AS ZHUYI,\r\n                decode(to_char(A.DATE_OF_BIRTH, 'yyyy-mm-dd'),\r\n                       NULL,\r\n                       '1900-01-01',\r\n                       to_char(A.DATE_OF_BIRTH, 'yyyy-mm-dd')) AS BIRTH,\r\n                to_char(B.ADMISSION_DATE_TIME, 'yyyy-mm-dd') AS ZYDATE,\r\n                (SELECT SUBSTR(DEPT_NAME, 1, 4) AS deptname\r\n                   FROM DEPT_DICT\r\n                  WHERE DEPT_CODE \= B.DEPT_CODE) AS deptname,\r\n                (SELECT SUBSTR(DEPT_NAME, 1, 4) AS BINGQU\r\n                   FROM DEPT_DICT\r\n                  WHERE DEPT_CODE \= B.Ward_Code) AS BINGQU,\r\n                replace(decode((SELECT NURSING_CLASS_NAME\r\n                                 FROM NURSING_CLASS_DICT\r\n                                WHERE NURSING_CLASS_CODE \= B.NURSING_CLASS),\r\n                               NULL,\r\n                               ' ',\r\n                               (SELECT NURSING_CLASS_NAME\r\n                                  FROM NURSING_CLASS_DICT\r\n                                 WHERE NURSING_CLASS_CODE \= B.NURSING_CLASS)),\r\n                        '护理',\r\n                        '') AS HULIDJ\r\n  FROM PAT_MASTER_INDEX A, pats_in_hospital B, BED_REC C\r\n WHERE A.PATIENT_ID \= B.PATIENT_ID\r\n   AND B.dept_code in\r\n       (SELECT dept_code\r\n          FROM dept_vs_ward\r\n         WHERE ward_code IN\r\n               (SELECT group_code FROM staff_vs_group WHERE emp_no \= '%s'))\r\n ORDER BY paixu ASC\r\n
